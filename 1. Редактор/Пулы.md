# IObjectPoolFacade

Актуальная реализация `ObjectPoolsService`.  
Фасад пулов ссылочных объектов. Приоритетное использование этого пула если, объект ссылочный (не `struct`) и часто создается / затирается, является value в ecs-компоненте

## методы

-   `T Get<T>` - получить объект из пула с типом `T`
-   `void Release<T>(T obj)` - вернуть объект в пул
-   `bool TryHasType<T>()` - безопасная проверка наличия типа в пуле

# IEcsLinkPool

Фасад пулов объектов на сцене.  
Работает с `GameObject`, которые относятся к `ecs`.

### Получение объекта

```
ecsLinkPool.Get(prefab);
```

Получение объекта из пула по префабу, если пул не найден по префабу, выпадет KeyNotFoundException. В случае успешного получение сущности, у него будет изменён флаг в пуле на false.

### Возврат объекта

```
ecsLinkPool.Release(gameObject);
```

Возврат объекта в пул, если пул не найден по префабу объекта, выпадет KeyNotFoundException. В случае успешного возврата сущности, у него будет изменён флаг в пуле на true.

### Создание объекта

Метод вызывается только если при вызове "Получения объекта" оказало, что свободных объектов для выдачи нет.

### Вытаскивание объекта из пула

```
ecsLinkPool.Pull(gameObject);
```

Вытаскивает объект из дочерних объектов фасада пула, формально объект остаётся в пуле.

### Инструкция пула

```
GameObjectPoolStrategy
```

Инструкция пула необходима для указания каких изменения должны происходить с объектом при вызове методов указанные выше. Также содержит конфигурации пулов, которые будут обрабатываются данной инструкцией.

Инициализация объекта, который получают(Init) вызывается при Получении объекта.

Возврат объекта, который возвращаем в пул(Release) вызывается при Возврате объекта.

Создание объекта, если в пуле нет свободных объектов(Create) вызывается при Создании объекта.

Вызывается при уничтожении или очистки пула(Destroy) вызывается при Очистке или уничтожении пула.

### Конфиг пула

```
PrefabPoolConfig
```

Содержит в себе Префаб пула, дефолтное количество, которое будет создано на старте, максимальное количество сущностей в пуле и опция проверки на одинаковые объекты возвращаемые в пул.
