# Компоненты

- `AiTagComponent` - сущность использует механику ИИ
- `BlockConfigComponent` - конфиг шанса и времени действия блока
- `PatrolPointComponent` - список путевых точек
- `CurrentTargetPointComponent` - текущая точка следования
- `FollowTagComponent` - флаг следования за цель(не путевой точкой)

# Механизм

1. по компоненту `CurrentTargetPointComponent` сущность проверяет и корректирует направление движения и следует до указанной точки
2. если сущность попадает в триггер `WayPointTrigger` и это цель, то создаётся событие о смене цели на следующую точку из `PatrolPointComponent`
3. если сущность захватывает триггером `FollowTrigger` другую сущность и это игрок, то создаётся событие о смени цели для следования на игрока и добавляет состояние **следовать**
4. если сущность выходит и это игрок, то владельцу `FollowTrigger` создаётся ивент на смену цели для следования к последней точке и теряет состояние **следовать**
5. если сущность захватывает триггером `AttackZoneTrigger` другую сущность и это игрок, то для сущности владельца создаётся событие для добавления состояния **атака** и он останавливает своё движение
6. если сущность потеряла из триггера `AttackZoneTrigger` другую сущности и это игрок, то для сущности владельца создаётся событие удаления состояния **атака** и если существует сущность отключения состояния **блок**, то в ней устанавливается другое время ожидания указанное в `BlockConfigComponent`
7. если сущность находится в зоне триггера `AttackZoneTrigger` и владелец имеет состояние **атака**, то с вероятностью указанной в `BlockConfigComponent` создаётся сущность установить состояние **блок** и сущность таймера со временем указанное в `BlockConfigComponent`, для отключения данного состояния
