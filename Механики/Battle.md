# Процесс битвы

Механика битвы в себе содержит 4 основные части:

- Battle - основные механики битвы
- Prepare - механика подготовки урона
- Damage - механика расчета и нанесения урона
- Dead - механика смерти

## Battle

Содержит в себе следующие компоненты:

- урон
- карта нанесения урона
- сопротивление|уязвимость
- флаг получения урона и события добавления/удаления
- флаг того, что сущность бьёт и события добавления/удаления

Также в системах битвы описано создание сущности попадания удара в триггер цели и добавление/удаление флагов получения урона и того, что сущность бьёт

## Prepare

Механика подготовки урона основана на двух системах:

1. Смотрит наличие какой-либо характеристики, которой можно нанести урон
2. Если после первой системы остались сущности, то собираем урон по характеристикам, которые есть у сущности цели и создаём новую сущность с подготовленным уроном

## Damage

Механика урона выполняет разделение урона по характеристикам и вычисляет урон в зависимости от наличия критического удара и сопротивления|уязвимости

## Dead
